<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
	
	<title>elilien / blog</title>
	<link href="http://elilien.com/blog/atom.xml" rel="self" />
	<link href="http://elilien.com/blog/" />
	<updated>2012-10-08T09:55:04+08:00</updated>
	<id>http://elilien.com/blog/</id>
	<author>
		<name>Eli Lien</name>
		<email>elilien@me.com</email>
	</author>
	
	
	<entry>
		<title>Storing Database Connection In A Static Class</title>
		<link href="http://elilien.com/blog/2012/storing-database-connection-in-a-static-class/"/>
		<updated>2012-10-07T00:00:00+08:00</updated>
		<id>http://elilien.com/blog/2012/storing-database-connection-in-a-static-class/</id>
		<content type="html">&lt;p&gt;这两天在写一个 Java 的程序 (Java + MySQL)，单用户登录，需要多次查询数据库，编译运行的时候发现每次需要查询数据库的时候都要等待3秒左右的时间，虽然是学校的服务器，但是校园网也不至于那么慢啊。开始以为是获取 MySQL 存储过程返回的 ResultSet 转换导致变慢的，但是我这儿数据也不多啊，之后换过数据库驱动也不济于事，最后发现每一次查询请求都会重新登录一遍数据库，用 &lt;code&gt;System.out.print();&lt;/code&gt; 测试了一下，果然是卡在登录那一步了，遂把程序跟数据库的连接写成静态的存在内存中，果然查询时间变短了。&lt;/p&gt;

&lt;p&gt;这是之前的代码:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;JdbcFiles&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Connection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Statement&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inorupdatevalue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;JdbcFiles&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;  &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

           &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
               &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;||&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isClosed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()){&lt;/span&gt;
               &lt;span class=&quot;n&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;forName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;com.mysql.jdbc.Driver&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
               &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;jdbc:mysql://database_server:port/database&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
               
               &lt;span class=&quot;c1&quot;&gt;//get a connection to the database for a user named booksystem&lt;/span&gt;
               &lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DriverManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getConnection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;uid&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;pwd&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
               &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;

        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;修改之后:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;JdbcFiles&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sql&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Connection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Statement&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inorupdatevalue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;JdbcFiles&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;  &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

           &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
               &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;||&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isClosed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()){&lt;/span&gt;
               &lt;span class=&quot;n&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;forName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;com.mysql.jdbc.Driver&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
               &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;jdbc:mysql://database_server:port/database&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
               
               &lt;span class=&quot;c1&quot;&gt;//get a connection to the database for a user named booksystem&lt;/span&gt;
               &lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DriverManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getConnection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;uid&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;pwd&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
               &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;

        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;



</content>
	</entry>
	
	<entry>
		<title>Configure My Ruby Development Environment</title>
		<link href="http://elilien.com/blog/2012/configure-my-ruby-development-environment/"/>
		<updated>2012-09-17T00:00:00+08:00</updated>
		<id>http://elilien.com/blog/2012/configure-my-ruby-development-environment/</id>
		<content type="html">&lt;p&gt;全新安装了 OS X Mountain Lion，这次在配置 Ruby 的时候发现跟 Mac OS X Lion 的步骤不一样了，在此做一个记录。&lt;/p&gt;

&lt;p&gt;首先老方法安装 RVM&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;curl -L get.rvm.io | bash -s stable
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;或者&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;bash &amp;lt; &amp;lt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;重新打开 Terminal&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;which rvm
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;接下来配置 Ruby，用原来的方法&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rvm install 1.9.3
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;会有以下提示&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;For JRuby:  Install the JDK. See http://developer.apple.com/java/download/  &lt;span class=&quot;c&quot;&gt;# Current Java version &amp;quot;1.6.0_26&amp;quot;  &lt;/span&gt;
For IronRuby: Install Mono &amp;gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2.6  
For Ruby 1.9.3: Install libksba &lt;span class=&quot;c&quot;&gt;# If using Homebrew, &amp;#39;brew install libksba&amp;#39;&lt;/span&gt;
  
To use an RVM installed Ruby as default, instead of the system ruby:  
  
    rvm install 1.8.7 &lt;span class=&quot;c&quot;&gt;# installs patch 357: closest supported version  &lt;/span&gt;
    rvm system ; rvm gemset &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;system.gems ; rvm 1.8.7 ; rvm gemset import system.gems &lt;span class=&quot;c&quot;&gt;# migrate your gems  &lt;/span&gt;
    rvm &lt;span class=&quot;nb&quot;&gt;alias &lt;/span&gt;create default 1.8.7  
  
And reopen your terminal windows.  
  
Xcode and gcc:  
  
Right now Ruby requires gcc to compile, but Xcode 4.2 and later no longer ship with gcc. Instead they ship with llvm-gcc &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;to which gcc is a symlink&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; and clang, neither of which are supported &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;building Ruby. Xcode 4.1 was the last version to ship gcc, which was /usr/bin/gcc-4.2.  
  
Xcode 4.1 and earlier:   
- Ruby will build fine.  
  
Xcode 4.2 and later &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;including Command Line Tools &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;Xcode&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;:  
- If you have gcc-4.2 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;and friends&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; from an earlier Xcode version, Ruby will build fine.
- If you don&lt;span class=&quot;se&quot;&gt;\’&lt;/span&gt;t have gcc-4.2, you have two options to get it:  
 * Install apple-gcc42 from Homebrew
 * Install osx-gcc-installer
  
  Homebrew:  
  
  If you are using Homebrew, you can install the apple-gcc42 and required libraries from homebrew/dupes:  
      brew update  
      brew tap homebrew/dupes  
      brew install autoconf automake apple-gcc42
      rvm pkg install openssl  
  
  This can live side by side with an existing Xcode 4.2+ install or Command Line Tools &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;Xcode.  
  
  osx-gcc-installer:  
  
  If you don&lt;span class=&quot;se&quot;&gt;\’&lt;/span&gt;t use Homebrew, you can download and install osx-gcc-installer: https://github.com/kennethreitz/osx-gcc-installer.  
  
  Warning: Installing osx-gcc-installer on top of a recent Xcode is known to cause problems, so you must uninstall Xcode before installing osx-gcc-installer. Afterwards you may install Xcode 4.2+ or Command Line Tools &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;Xcode &lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;you desire.  
  
  ** NOTE: Currently, Node.js is having issues building with osx-gcc-installer. The only fix is to install Xcode over osx-gcc-installer.  
  
Press &lt;span class=&quot;s1&quot;&gt;&amp;#39;q&amp;#39;&lt;/span&gt; to &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;根据提示，首先安装 homebrew&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ruby &amp;lt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;curl -fsSkL raw.github.com/mxcl/homebrew/go&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;然后执行以下安装&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew install libksba
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew update
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew tap homebrew/dupes
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew install autoconf automake apple-gcc42
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rvm pkg install openssl
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;由于万恶的校园网，libksba 老是找不到 host，果断跳过。&lt;/p&gt;

&lt;p&gt;现在，就可以正常用 RVM 安装 Ruby 了&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rvm install 1.9.3
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rvm use 1.9.3
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rvm --default 1.9.3
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;



</content>
	</entry>
	
	<entry>
		<title>说说Google Calendar</title>
		<link href="http://elilien.com/blog/2012/use-google-calendar-to-remind-your-curriculum-via-sms/"/>
		<updated>2012-09-16T00:00:00+08:00</updated>
		<id>http://elilien.com/blog/2012/use-google-calendar-to-remind-your-curriculum-via-sms/</id>
		<content type="html">&lt;p&gt;开学两周了，课表还没打印，正愁着什么时候去打印课程表，Google Calendar 这货突然在我脑子里面闪过，对啊！我为毛不把课程表弄到 Google Calendar 里面呢！
上教学管理部网站查到自己的课程表，虽然有点参差不齐，但是我有 Calendar 这等神器啊！&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;a href=&quot;http://www.flickr.com/photos/eli-lien/7991785467/&quot; title=&quot;Screen Shot 2012-09-16 at 8.41.50 PM by im.elilien, on Flickr&quot;&gt;&lt;img src=&quot;http://farm9.staticflickr.com/8173/7991785467_fcac70eebc_z.jpg&quot; width=&quot;640&quot; height=&quot;418&quot; alt=&quot;Screen Shot 2012-09-16 at 8.41.50 PM&quot;&gt;&lt;/a&gt;&lt;/div&gt;


&lt;p&gt;首先把每一项课程记录在某一周内，然后按住 option 键拖动就能复制该课程到任意一天，这步搞定了直接 File-&gt;Export-&gt;Export，得到 ics 文件，再进入 Google Calendar 导入就能得到一个课程表的日历，之后还可以建立其他的日历，比如 Activities，这样就方便将不同的行程与不同的人共享，Curriculum 可以与同班同学共享，Activities 可以与好友共享，设置-&gt;移动设置，验证自己的手机号码，就能设定比如行程的30分钟前来短信通知，而且，这个碉堡的功能是免费的！&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;a href=&quot;http://www.flickr.com/photos/eli-lien/7991636717/&quot; title=&quot;Screen Shot 2012-09-16 at 8.22.30 PM by im.elilien, on Flickr&quot;&gt;&lt;img src=&quot;http://farm9.staticflickr.com/8459/7991636717_275e81d07c_z.jpg&quot; width=&quot;640&quot; height=&quot;387&quot; alt=&quot;Screen Shot 2012-09-16 at 8.22.30 PM&quot;&gt;&lt;/a&gt;&lt;/div&gt;


&lt;div align=&quot;center&quot;&gt;&lt;a href=&quot;http://www.flickr.com/photos/eli-lien/7991635853/&quot; title=&quot;Screen Shot 2012-09-16 at 8.22.12 PM by im.elilien, on Flickr&quot;&gt;&lt;img src=&quot;http://farm9.staticflickr.com/8029/7991635853_f3a9c5b5af_z.jpg&quot; width=&quot;640&quot; height=&quot;387&quot; alt=&quot;Screen Shot 2012-09-16 at 8.22.12 PM&quot;&gt;&lt;/a&gt;&lt;/div&gt;

</content>
	</entry>
	
	<entry>
		<title>再见</title>
		<link href="http://elilien.com/blog/2012/leaving-for-dalian/"/>
		<updated>2012-09-01T00:00:00+08:00</updated>
		<id>http://elilien.com/blog/2012/leaving-for-dalian/</id>
		<content type="html">&lt;p&gt;再有8小时15分钟，我就要离开这一片养育我十九年的热土。&lt;/p&gt;

&lt;p&gt;又一次的北上，又一次的失眠。&lt;/p&gt;

&lt;p&gt;记起第一次到大连，是妈妈和小姑一块儿把我给送过去的，第一次坐那么远的火车，从桂南站，到北京站，再转大连站，一路奔波，可惜的是在北京待的唯一一天还下起了不小的雨，不玩也罢，到大连火车站，很有幸遇上了很古朴风的铛铛车。随着学校迎新的车一路拐弯，我的思绪跟着飘扬，那时候对大连这个城市还是有着许多的憧憬..&lt;/p&gt;

&lt;p&gt;第一个学期结束，小姑不管怎样都不让我坐火车回家了，路途遥远不说，最主要的还是让人身心疲惫，毕竟我目前还只能作为一个匆匆的过客，而不是旅人，缺少的是那一颗闲暇的心。&lt;/p&gt;

&lt;p&gt;就这样，转眼间，我来到了大三，也就是明天报到后，我便是正式的大三学长了。有好几次一想到这儿，我就会微微地发慌。不禁感叹，时间过得可真快，我还没准备好，大半个大学生活就过去了，而数数自己那些少得可怜的知识，我多么希望重新来过。家里面一直坚持让我考研，这让我很情何以堪的，我的性格我很明白，但是有时候仔细想想，我那一丁点的理智告诉我，也许还是考个研好吧！也许，我需要更多的时间来思考，只是，我已经是大三的人了。&lt;/p&gt;

&lt;p&gt;回眸每一次回家，看到越发年级大的爸妈，心头就一阵阵的辛酸，我尝试着让自己乐观，总想为他们做些什么，这个时候才感受得到自己的弱小，还不足以撑起一个家。嗯，岁月果真是一把杀猪刀。&lt;/p&gt;

&lt;p&gt;自从有了网络，我就深深感觉到自己跟家里人的沟通更少了，不愿意出门，哪怕是爸妈说要带我出去玩，更怕见到熟人，我现在很难过就是跟家人有着那么近的距离居然说不上几句话，也许是我的内心藏着太多的秘密，不愿去分享，只好一个人来承担。&lt;/p&gt;

&lt;p&gt;马上就要离开，现在才发现，我是有多么地舍不得他们，多想要跟他们再待几天。&lt;/p&gt;

&lt;p&gt;夜深了，天也快亮了，眯一会儿眼睛我就要出发，也许，这就是成长，我也只好用这句扯淡的话来安慰安慰自己，好在明天分别的时候别流泪。&lt;/p&gt;

&lt;p&gt;Eli 写于2012年9月1日 现在是凌晨3点整&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>ROT13加密算法</title>
		<link href="http://elilien.com/blog/2012/rot13-encryption-method/"/>
		<updated>2012-08-31T00:00:00+08:00</updated>
		<id>http://elilien.com/blog/2012/rot13-encryption-method/</id>
		<content type="html">&lt;p&gt;ROT13 是凯撒密码加密演算法的特例，相对于 PGP, RSA, DES 等比较复杂的算法，ROT13 用于一般文件的加密已经足够，比如说...加密网页中的 e-mail 以防止 spam 爬虫抓取。&lt;/p&gt;

&lt;h3&gt;算法原理&lt;/h3&gt;

&lt;p&gt;首先检查字元字母顺序并以其13位之后的字母取代之，超过时则重新绕回26英文字母开头，比如 &quot;HELLO&quot; 经过 ROT13 加密得到 &quot;URYYB&quot;。由于在英文字母表里只有26个字母，且 26 = 2 * 13，ROT13 函数是它自己的逆反：&lt;/p&gt;

&lt;p&gt;∀(x): ROT13(ROT13(x)) = ROT26(x) = x&lt;/p&gt;

&lt;h3&gt;用法&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;rot13&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tr&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;A-Za-z&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;N-ZA-Mn-za-m&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#使用: print &amp;#39;&amp;lt;a href=&amp;quot;mailto:elilien@me.com&amp;quot;&amp;gt;elilien@me.com&amp;lt;/a&amp;gt;&amp;#39;.rot13&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;用这个办法可以在网页中正常显示自己的 e-mail 并有效防止垃圾邮件：&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text/javascript&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;&amp;quot;&amp;lt;n uers=\&amp;quot;znvygb:ryvyvra\100zr\056pbz\&amp;quot; bapyvpx=\&amp;quot;_tnd\056chfu([&amp;#39;_genpxRirag&amp;#39;, &amp;#39;yvaxGb&amp;#39;, &amp;#39;rznvy&amp;#39;, guvf\056uers]);\&amp;quot;&amp;gt;ryvyvra\100zr\056pbz&amp;lt;\057n&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/[a-zA-Z]/g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fromCharCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;Z&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;122&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;charCodeAt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;26&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);}));&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;



</content>
	</entry>
	
	<entry>
		<title>买了个Flickr Pro</title>
		<link href="http://elilien.com/blog/2012/flickr-pro-account/"/>
		<updated>2012-08-28T00:00:00+08:00</updated>
		<id>http://elilien.com/blog/2012/flickr-pro-account/</id>
		<content type="html">&lt;p&gt;前一天晚上在整理着最近的照片时，鬼使神差就想到了 Flickr 这个神一般的服务，于是乎在用着免费帐户的情况下各种上传照片，挂了一个晚上，第二天早上起来看电脑，发现 Photostream 里面只保留了最新200张照片，我知道，这一次，我真心淡腾了。&lt;/p&gt;

&lt;p&gt;昨儿晚上刚回到家就跟抽风似的买了个 Flickr Pro Update，也许是受那个200张的诟病，不管了，今晚继续通宵上传，嗯，我就是个淡腾的主还不允许自己淡腾。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;a href=&quot;http://www.flickr.com/photos/eli-lien/7874663036/&quot; title=&quot;Screen Shot 2012-08-28 at 2.23.38 AM by im.elilien, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7277/7874663036_46af52707d_z.jpg&quot; width=&quot;640&quot; height=&quot;381&quot; alt=&quot;Screen Shot 2012-08-28 at 2.23.38 AM&quot;&gt;&lt;/a&gt;&lt;/div&gt;


&lt;br&gt;


&lt;p&gt;Welcome! &lt;a href=&quot;http://www.flickr.com/photos/eli-lien/&quot;&gt;http://www.flickr.com/photos/eli-lien/&lt;/a&gt;&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>在GAE上部署GoAgent</title>
		<link href="http://elilien.com/blog/2012/goagent-on-gae-remastered/"/>
		<updated>2012-08-06T00:00:00+08:00</updated>
		<id>http://elilien.com/blog/2012/goagent-on-gae-remastered/</id>
		<content type="html">&lt;p&gt;声明一下，这篇文章于 Apr. 24, 2012 发表在我原来的 Wordpress 博客中，由于迁移到新的平台，而且原来的排版也很糟糕，所以 remaster 了现在的这个版本。&lt;/p&gt;

&lt;h3&gt;前言&lt;/h3&gt;

&lt;p&gt;GAE 是由 Google 提供的一个云计算平台，用户可以免费或付费在上面部署自己的应用。&lt;/p&gt;

&lt;p&gt;GoAgent 是使用 Python 和 Google App Engine SDK 编写的网络软件，可以运行在 Windows / Mac OS X / Linux / &lt;a href=&quot;https://code.google.com/p/gaeproxy&quot;&gt;Android&lt;/a&gt; / &lt;a href=&quot;https://code.google.com/p/goagent/wiki/GoAgent_IOS&quot;&gt;iPod Touch&lt;/a&gt; / &lt;a href=&quot;https://code.google.com/p/goagent/wiki/GoAgent_IOS&quot;&gt;iPhone&lt;/a&gt; / &lt;a href=&quot;https://code.google.com/p/goagent/wiki/GoAgent_IOS&quot;&gt;iPad&lt;/a&gt; / &lt;a href=&quot;https://code.google.com/p/goagent/wiki/GoAgent_webOS&quot;&gt;webOS&lt;/a&gt; / &lt;a href=&quot;https://code.google.com/p/goagent/wiki/GoAgent_OpenWRT&quot;&gt;OpenWRT&lt;/a&gt; / &lt;a href=&quot;https://code.google.com/p/goagent/wiki/GoAgent_Maemo&quot;&gt;Maemo&lt;/a&gt; 上。&lt;/p&gt;

&lt;h3&gt;正文&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;登录 &lt;a href=&quot;https://appengine.google.com/&quot;&gt;GAE&lt;/a&gt;，没有 Google 帐户请&lt;a href=&quot;https://accounts.google.com/SignUp&quot;&gt;猛击&lt;/a&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Create Application，&quot;Application Identifier&quot; 处填写 app_id，Application Title 处随意。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在 &lt;a href=&quot;https://code.google.com/p/goagent/&quot;&gt;GoAgent Project&lt;/a&gt; 主页下载对应包包并 unzip 得到 goagent 文件夹。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;修改 local/proxy.ini 中 [gae] 下 &quot;appid=&quot; 值为第二步中创建的 app_id，多个 app_id 间用 &quot;|&quot; 隔开。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;上传&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Mac OS X 用户: 在 Terminal 中 cd 进入 server 目录 &lt;code&gt;uploaddir=python python uploader.zip&lt;/code&gt; (若出现502错误重复该步骤，多个 app_id 依次填写 &quot;APPID&quot; 分别上传。)&lt;/li&gt;
&lt;li&gt;Windows 用户: 修改 server\golang\app.yaml 中 applicaion 值为 app_id，先运行 local\proxy.exe，然后双击 server\uploader.bat，根据提示信息输入相应 application, email 及 password&lt;/li&gt;
&lt;li&gt;上传成功后代理的地址为 127.0.0.1:8087&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Mac OS X 用户需在 GoAgent.app -&gt; 右键 -&gt; Show Package Contents，编辑 Contents/Info.plist 将 GoAgentPath 值修改为 &lt;code&gt;/Applications/GoAgent/local/proxy.py&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;运行&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Mac OS X 用户运行 GoAgent.app&lt;/li&gt;
&lt;li&gt;Windows 用户以管理员身份运行 goagent.exe (双击 addto-startup.vbs 实现开机自启动)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;到 Chrome Web Store 下载 &lt;a href=&quot;https://chrome.google.com/webstore/detail/dpplabbmogkhghncfbfdeeokoefdjegm&quot;&gt;SwitchySharp&lt;/a&gt;，SwitchySharp Options -&gt; Import/Export，&quot;Restore from Online&quot; 处填写 &lt;a href=&quot;http://goagent.googlecode.com/files/SwitchyOptions.bak&quot;&gt;http://goagent.googlecode.com/files/SwitchyOptions.bak&lt;/a&gt;，Restore from Online 后切换到 &quot;Switch Rules&quot; 点击右下方 &quot;Update List Now&quot;，提示 &quot;Rule list update successfully&quot; 即成功。(FireFox 用户可使用 &lt;a href=&quot;https://addons.mozilla.org/zh-cn/firefox/addon/autoproxy/&quot;&gt;AutoProxy&lt;/a&gt;，原理相同。)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;解决证书问题&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Mac OS X:

&lt;ul&gt;
&lt;li&gt;打开 Keychain Access -&gt; Login -&gt; Certificates，找到 &quot;GoAgent CA&quot; 并删除&lt;/li&gt;
&lt;li&gt;打开 /Applications/GoAgent/local 找到 &quot;CA.crt&quot; 双击导入并选择 &quot;Always Trust&quot;&lt;/li&gt;
&lt;li&gt;在 Keychain Access -&gt; Login -&gt; Certificates 找到 &quot;GoAgent CA&quot; 右键 -&gt; Get Info，展开 Trust 栏并将 &quot;When using this certificate&quot; 改为 &quot;Always Trust&quot;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Windows 原理相同未试验。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在 Mac OS X 下配置全局自动代理&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Chrome -&gt; SwithySharp Options -&gt; Import/Export -&gt; Export PAC Fi​​le&lt;/li&gt;
&lt;li&gt;将导出的 SwichyPac.pac 移动到 ~/Library/Internet Plug-Ins 目录下&lt;/li&gt;
&lt;li&gt;打开网络设置 (System Preferences -&gt; Network) Advanced -&gt; Proxies -&gt; Automatic Proxy Configuration，勾选之并在右边选择上一步导出的 SwichyPac.pac 路径，保存即可。(SwichyPac.pac 必须放在 ~/Library/Internet Plug-Ins 目录下，否则由于 sandbox 的原因 Safari 不能识别 PAC 规则。该方法在 Mac OS X 10.7 及之前版本的系统中有效，自 OS X 10.8 开始 Safari 已无法正常被代理，目前问题正在解决中。)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;


&lt;h3&gt;常见问题&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Google Reader 错误404: 使用 &lt;a href=&quot;https://www.google.com/reader&quot;&gt;https://www.google.com/reader/&lt;/a&gt; 访问。&lt;/li&gt;
&lt;li&gt;Google Plus 不能看内嵌视频: 将 &quot;*://*.ytimg.com/*&quot; 加入 Rules。&lt;/li&gt;
&lt;li&gt;Youtube 不能上传及观看直播: 配置 [crlf]enable=0。&lt;/li&gt;
&lt;li&gt;提示 Error code 502:

&lt;ul&gt;
&lt;li&gt;401: Unauthorized 一般是处于内网环境中，需设置 proxy.ini 内 proxy 段落。&lt;/li&gt;
&lt;li&gt;404: Not Found 一般是 proxy.ini 内 app_id 未填对，或者服务端未部署成功。&lt;/li&gt;
&lt;li&gt;503: Service Unavailable 一般是流量用完，需更换 app_id。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;uploader 上传失败:

&lt;ul&gt;
&lt;li&gt;400: Bad Request 到 http://appengine.google.com 新建一个 app_id 再上传。&lt;/li&gt;
&lt;li&gt;404: Not Found 对应 app_id 未创建。&lt;/li&gt;
&lt;li&gt;10060 连接服务器超时，挂 VPN 上传。&lt;/li&gt;
&lt;li&gt;10054 连接被重置，挂 VPN 上传。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;

</content>
	</entry>
	
	<entry>
		<title>Special use of Terminal</title>
		<link href="http://elilien.com/blog/2012/special-use-of-terminal/"/>
		<updated>2012-08-02T00:00:00+08:00</updated>
		<id>http://elilien.com/blog/2012/special-use-of-terminal/</id>
		<content type="html">&lt;p&gt;用 Terminal 可以简单地完成很多事情，在我看来，比 OS X GUI 还要来的方便。&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;lsof&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;列出当前用户所打开的文件以及打开这些文件对应的进程等，当 OS X 提示 &quot;The item can't be xxx because it's xxx&quot; 时可使用该命令查看使用该文件的进程并 kill 掉。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;open&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;该命令几乎可以打开一切我们所能想到的东西，文件/文件夹，网址 (&lt;code&gt;open http://elilien.com&lt;/code&gt;)，远程屏幕共享 (&lt;code&gt;open vnc://1.2.3.4&lt;/code&gt;)，甚至查找单词 (&lt;code&gt;open dict://apple&lt;/code&gt;)。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;pbcopy&lt;/code&gt; 与 &lt;code&gt;pbpaste&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;这两个命令能在 Terminal 与 OS X Clipboard 之间复制/粘贴数据，使用 &lt;code&gt;lsof | pbcopy&lt;/code&gt; 可以将 lsof 当前内容复制到 OS X Clipboard 中，在需要之处用 ⌘+V 粘贴。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;rm&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;删除命令。可以在一瞬间批量删除多个文件/文件夹，名称支持通配符 &quot;*&quot;，慎用。&lt;code&gt;rm -i&lt;/code&gt; 可在删除文件/文件夹前询问用户。查看更多用法 &lt;code&gt;man rm&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;killall appname&lt;/code&gt; / &lt;code&gt;kill PID&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;强制退出应用/进程 (当应用无响应的时候)。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;sudo defaults write /Library/Preferences/com.apple.loginwindow LoginwindowText &quot;Your Text&quot;&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;定制登录界面的提示，可以试试这个    &lt;br/&gt;
&lt;code&gt;loginText=&quot;iSight image capture at login activen&quot;`date &quot;+on %m/%d/%Y at %H:%M:%S&quot;`&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;FORCE EMPTY THE TRASH&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo rm -r &lt;/code&gt;将 Trash 内所有文件拖拽到 Terminal 窗口然后 return (注意 &quot;-r&quot; 后有一空格)。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo rm -rf ~/.Trash/ /.Trashes/ /Volumes//.Trashes/&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;

</content>
	</entry>
	
	<entry>
		<title>Hello World, Hello Jekyll!</title>
		<link href="http://elilien.com/blog/2012/hello-world-hello-jekyll/"/>
		<updated>2012-07-30T00:00:00+08:00</updated>
		<id>http://elilien.com/blog/2012/hello-world-hello-jekyll/</id>
		<content type="html">&lt;p&gt;最近在网络上晃荡的时候发觉有不少人的博客都已经迁移到了 GitHub，使用 Octopress 或者 Jekyll 搭建，对服务器要求非常低，速度自然很快。&lt;/p&gt;

&lt;p&gt;之前在 Wordpress 写作的时候，每次用龟速的校园网打开 /wp_admin 都是我的噩梦。正好觉着原来蓝色的 &quot;e&quot; Logo 有点..呆板..？总之就是无论在何时看到我就有种想把它给撕碎的冲动。遇着这次暑假回家，抽出大概一个星期的时间把 Logo 和界面给 recreate 了，今天，我迫不及待地把这个 All New Designed 的博客给 push 出来给大家拍拍砖 。&lt;/p&gt;

&lt;p&gt;着手部署之前把资料都查好了，网络上流传关于 Jekyll 的那句话 &quot;像黑客一样写博客&quot; 立马戳中我的 G 点啊，于是不管在机场还是在家里我都被这东西牢牢吸引住了，折腾了几天还没怎么出成果让我痛不欲生。后来仔细阅读了官方文档后发现 Jekyll 就是一个静态网页的生成引擎，安装是为了方便使用者在本地预览文章。明白了 Jekyll 与 Rdiscount/Maruku/Redcloth 等之间的关系后一切都明朗了，重新配好环境，申请 GitHub Pages .etc，折腾了大概两个星期，几乎每天都熬夜，到现在博客的搭建已经基本上算完工，一些好的 idea 将在今后慢慢实现，接下来是旧文章的手动迁移 (主要是我这个人强迫症忒厉害，对那些不经过我手用脚本转换的文章实在是放心不下)，而且有将文章 rewrite 为纯文字版的想法，因为我享受在 Mac 下用 Byword 撰写 Markdown 的乐趣。&lt;/p&gt;

&lt;p&gt;最后我想说，Wordpress 的确是一个好的写作工具，对于踏入 Jekyll 这条万恶不复的深渊我也并不后悔，相反还能学到不少东西。&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>在Mac OS X中修改MAC地址</title>
		<link href="http://elilien.com/blog/2012/change-mac-address-in-mac-os-x/"/>
		<updated>2012-06-25T00:00:00+08:00</updated>
		<id>http://elilien.com/blog/2012/change-mac-address-in-mac-os-x/</id>
		<content type="html">&lt;p&gt;MAC (Medium/Media Access Control) 地址，或称为 MAC 位址、硬件地址，用来定义网络设备的位置，由48比特长，12位的16进制数字组成，0到23位是厂商向 IETF 等机构申请用来标识厂商的代码，也称为“编制上唯一的标识符” (Organizationally Unique Identifier)。是识别 LAN (局域网) 结点的标志。地址的24到47位由厂商自行分派，是各个厂商制造的所有网卡的一个唯一编号。在 OSI 模型中，第三层网络层负责 IP 地址，第二层数据链路层则负责 MAC 位址。因此一个网卡会有一个全球唯一固定的 MAC 地址，但可对应多个IP地址。第40位是组播地址标志位。&lt;/p&gt;

&lt;p&gt;在我朝很多大学的校园网都是 IP 地址与 MAC 地址绑定的，路由器从外面收到发给子网的包时，直接用其事先存储的 ARP 表查出对应 MAC 地址而以这个 MAC 地址为目的 MAC 地址在子网内发包 , 这样没有注册的网卡就收不到外面来的包.  但这种方法有缺陷，就是对发出的包不检查，即使网卡 MAC 是未登记的， 也可以向外发数据包，而且可以用伪造的 IP， 当然有的路由器检查源 IP 的范围， 这时候伪造的 IP 也必须属于子网内的 IP。从根本上说，采用 IP-MAC 来防止 IP 盗用是不行的，所有的网卡 MAC 都可以修改，而且重点是网卡发出的包的源 MAC 地址并不是网卡本身写上去的， 而是应用程序提供的，只是在通常的实现中，应用程序先从网卡上得到了 MAC 地址，每次发送包的时候用这个 MAC 地址作为源 MAC 地址而已，所以我们仅仅靠修改网络的驱动程序就可以改变 MAC 地址。由于种种原因，像我，需要经常更换本本的工作地点，修改 MAC 地址就成了家常便饭，下面利用如上原理，说说修改的办法。&lt;/p&gt;

&lt;p&gt;首先在 Terminal 中查看当前网卡信息：&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;ifconfig
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;其中 en0 代表的是以太网卡，en1 为无线网卡，跟在 ether 后面的即为该网卡的 MAC 地址。修改该网卡 (en0) MAC 地址：&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;sudo ifconfig en0 ether aa:bb:cc:dd:ee:ff
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;&lt;em&gt;aa:bb:cc:dd:ee:ff 即为需要修改为的 MAC 地址，注意 MAC 地址的格式。&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;过程中提示需要输入密码时输入当前登录用户密码回车即可。修改好后查看修改后的网卡 MAC 地址等信息：&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;ifconfig en0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;&lt;em&gt;注：用该方法修改 MAC 地址重启后将自动恢复为原 MAC 地址。&lt;/em&gt;&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Java中的移位运算符</title>
		<link href="http://elilien.com/blog/2012/bitwise-shift-operators-in-java/"/>
		<updated>2012-06-06T00:00:00+08:00</updated>
		<id>http://elilien.com/blog/2012/bitwise-shift-operators-in-java/</id>
		<content type="html">&lt;p&gt;移位运算符面向的运算对象即是二进制中的“位”，主要包含：左移位运算符 (&amp;lt;&amp;lt;)，右移位运算符 (&amp;gt;&amp;gt;&amp;gt;)，以及带符号的右移位运算符 (&amp;gt;&amp;gt;)。&lt;/p&gt;

&lt;h3&gt;左移位运算符 (&amp;lt;&amp;lt;)&lt;/h3&gt;

&lt;p&gt;左移位运算符是将运算符左边的对象向左移动运算符右边所指定的位数，并在低位补0。即向左移了 n 位，相当于乘以2的 n 次幂。例如：&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LeftBitwiseShiftOperator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;cm&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;    * @param args&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;    */&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// TODO Auto-generated method stub&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;result = &amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;运行结果：&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;java&quot;&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;&lt;em&gt;以二进制表示十进制的2为 00000010，向左移动2位，就变成了 00001000，即十进制的8。也就相当于 2 * 2&lt;sup&gt;2&lt;/sup&gt; = 8。&lt;/em&gt;&lt;/p&gt;

&lt;h3&gt;右移位运算符 (&amp;gt;&amp;gt;&amp;gt;)&lt;/h3&gt;

&lt;p&gt;右移位运算符是将运算符左边的对象向右移动运算符右边所指定的位数，并在高位补0。即向右移了 n 位，相当于乘以2的 -n 次幂。例如：&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RightBitwiseShiftOperator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;cm&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;    * @param args&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;    */&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// TODO Auto-generated method stub&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;result = &amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;运行结果：&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;java&quot;&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;&lt;em&gt;以二进制表示十进制的8为 00001000，向右移动2位，就变成了 00000010，即十进制的2。也就相当于 8 *  2&lt;sup&gt;(-2)&lt;/sup&gt; = 2。&lt;/em&gt;&lt;/p&gt;

&lt;h3&gt;带符号的右移位运算符 (&amp;gt;&amp;gt;)&lt;/h3&gt;

&lt;p&gt;带符号的右移位运算符是将运算符左边的对象向右移动运算符右边所指定的位数，若左边的对象为正数，则在其高位补0，若左边的对象为负数，则在其高位补1。例如：&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RightBitwiseShiftOperatorWithSymbol&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;cm&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;    * @param args&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;    */&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// TODO Auto-generated method stub&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;result1 = &amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;result2 = &amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;运行结果：&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;java&quot;&gt;&lt;span class=&quot;n&quot;&gt;result1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;result2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;&lt;em&gt;x 的值为8，转换成二进制为 00001000，右移两位并在高位补0为 00000010，即是2。&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;y 的值为-8，转换成二进制为 11110111，右移两位并在高位补1为 11111101，即是-2。&lt;/em&gt;&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>OS X对第三方SSD的TRIM支持</title>
		<link href="http://elilien.com/blog/2011/mac-os-x-lion-trim-support-for-the-third-part-ssd/"/>
		<updated>2011-11-02T00:00:00+08:00</updated>
		<id>http://elilien.com/blog/2011/mac-os-x-lion-trim-support-for-the-third-part-ssd/</id>
		<content type="html">&lt;p&gt;在 Mac OS X 中，苹果官方默认只对自己认证的 SSD 提供 TRIM 支持。&lt;/p&gt;

&lt;blockquote&gt;&lt;h4&gt;&lt;em&gt;什么是 TRIM&lt;/em&gt;&lt;/h4&gt;

&lt;blockquote&gt;&lt;p&gt;在系统要向硬盘写入数据时，会先通知硬盘将以前的数据擦除，再将数据写入。而在删除数据时，系统只是会在需要删除的数据块处作一个标记，说明此处数据块无用，等到有新的数据写入需要占用该数据块的时候才会真正删除该数据块。前面提到的作标记动作会先保留在磁盘缓存中，等到磁盘空闲的时候才会执行。如此一来，磁盘便需要更多的时间来执行上述操作，存取速度就会变慢。而当 Mac OS X 识别到已经认证的 SSD 后便会默认开启 TRIM 支持，此时删除数据就不会直接向硬盘发出删除指令了，只使用 Volume Bitmap 来记录删除的数据块，Volume Bitmap 仅仅是一个磁盘快照，其读写数据的速度比直接读写硬盘去标记删除区域要快得多，这样就会大大节省数据的读写操作时间。而后是向磁盘写入数据，由于 NAND 闪存保存数据是纯粹的数字形式，因此可以直接根据 Volume Bitmap 的情况，向快照中已删除的区块写入新的数据，而不用花时间去擦除原来的数据块。&lt;/p&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;

&lt;p&gt;我们可以用如下方法开启 Lion 对 TRIM 的支持。&lt;/p&gt;

&lt;p&gt;在 Terminal 中&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;备份需要修改的内核文件&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;sudo cp /System/Library/Extensions/IOAHCIFamily.kext/Contents/PlugIns/IOAHCIBlockStorage.kext/Contents/MacOS/IOAHCIBlockStorage /System/Library/Extensions/IOAHCIFamily.kext/Contents/PlugIns/IOAHCIBlockStorage.kext/Contents/MacOS/IOAHCIBlockStorage.original
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;开启 TRIM 支持&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;sudo perl -pi -e &lt;span class=&quot;s1&quot;&gt;&amp;#39;s|(x52x6Fx74x61x74x69x6Fx6Ex61x6Cx00).{9}(x00x51)|$1x00x00x00x00x00x00x00x00x00$2|sg&amp;#39;&lt;/span&gt; /System/Library/Extensions/IOAHCIFamily.kext/Contents/PlugIns/IOAHCIBlockStorage.kext/Contents/MacOS/IOAHCIBlockStorage
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;清空系统内核扩展缓存 (kernel extension cache)&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;sudo kextcache -system-prelinked-kernel
sudo kextcache -system-caches
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;重启系统，Enjoy!&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;

&lt;p&gt;关闭 TRIM 使用以下命令&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;sudo perl -pi -e &lt;span class=&quot;s1&quot;&gt;&amp;#39;s|(x52x6Fx74x61x74x69x6Fx6Ex61x6Cx00).{9}(x00x51)|$1x41x50x50x4Cx45x20x53x53x44$2|sg&amp;#39;&lt;/span&gt; /System/Library/Extensions/IOAHCIFamily.kext/Contents/PlugIns/IOAHCIBlockStorage.kext/Contents/MacOS/IOAHCIBlockStorage
sudo kextcache -system-prelinked-kernel
sudo kextcache -system-caches
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;若遇到严重错误恢复备份&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;sudo cp /System/Library/Extensions/IOAHCIFamily.kext/Contents/PlugIns/IOAHCIBlockStorage.kext/Contents/MacOS/IOAHCIBlockStorage.original /System/Library/Extensions/IOAHCIFamily.kext/Contents/PlugIns/IOAHCIBlockStorage.kext/Contents/MacOS/IOAHCIBlockStorage
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;p&gt;该原理仅是用 &quot;0&quot; 替换 &quot;IOAHCIBlockStorage&quot; 文件中的 &quot;APPLE SSD&quot; 字符串，以绕过 Apple 通过字符串检测是否为自己认证 SSD 之验证。&lt;/p&gt;

&lt;p&gt;当在 &quot;System Report&quot; 中看到如下内容 (&lt;strong&gt;TRIM Support: YES&lt;/strong&gt;) 时，Macbook Pro 已经开启了对第三方 SSD 的 TRIM 支持。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;INTEL SSDSA2M160G2GN:
    
  Capacity: 160.04 GB (160,041,885,696 bytes)
  Model:    INTEL SSDSA2M160G2GN                    
  Revision: 2CV102HD
  Serial Number:    CVPO045100J6160AGN  
  Native Command Queuing:   Yes
  Queue Depth:  32
  Removable Media:  No
  Detachable Drive: No
  BSD Name: disk0
  Medium Type:  Solid State
  TRIM Support: Yes
  Partition Map Type:   GPT (GUID Partition Table)
  S.M.A.R.T. status:    Verified
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;



</content>
	</entry>
	
	
</feed>